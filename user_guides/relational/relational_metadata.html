
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Relational Metadata &#8212; SDV 0.4.1 documentation</title>
    
  <link rel="stylesheet" href="../../_static/css/index.d431a4ee1c1efae0e38bdfebc22debff.css">

    
  <link rel="stylesheet"
    href="../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      
  <link rel="stylesheet"
    href="../../_static/vendor/open-sans_all/1.44.1/index.css">
  <link rel="stylesheet"
    href="../../_static/vendor/lato_latin-ext/1.44.1/index.css">

    
    <link rel="stylesheet" href="../../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
  <link rel="preload" as="script" href="../../_static/js/index.30270b6e4c972e43c488.js">

    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/language_data.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true, "ignoreClass": "document", "processClass": "math|output_area"}})</script>
    <link rel="shortcut icon" href="../../_static/SDV-Logo-Black.ico"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Models" href="models.html" />
    <link rel="prev" title="Data Description" href="data_description.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main">
<div class="container-xl">

    
    <a class="navbar-brand" href="../../index.html">
      <img src="../../_static/SDV-Logo-Color.png" class="logo" alt="logo">
    </a>
    
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-menu" aria-controls="navbar-menu" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar-menu" class="col-lg-9 collapse navbar-collapse">
      <ul id="navbar-main-elements" class="navbar-nav mr-auto">
        
        
        <li class="nav-item ">
            <a class="nav-link" href="../../getting_started/index.html">Getting Started</a>
        </li>
        
        <li class="nav-item active">
            <a class="nav-link" href="../index.html">User Guides</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../../api_reference/index.html">API Reference</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../../developer_guides/index.html">Developer Guides</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../../history.html">Release Notes</a>
        </li>
        
        
      </ul>


      

      <ul class="navbar-nav">
        
          <li class="nav-item">
            <a class="nav-link" href="https://github.com/sdv-dev/SDV" target="_blank" rel="noopener">
              <span><i class="fab fa-github-square"></i></span>
            </a>
          </li>
        
        
      </ul>
    </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
          <div class="col-12 col-md-3 bd-sidebar">

<form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form>


<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">

  <div class="bd-toc-item active">
  

  <ul class="nav bd-sidenav">
      
      
      
      
        
          
              <li class="">
                  <a href="../single_table/index.html">Single Table Data</a>
              </li>
          
        
          

              <li class="active">
                  <a href="index.html">Relational Data</a>
                  <ul>
                  
                      <li class="active">
                          <a href="data_description.html">Data Description</a>
                      </li>
                  
                      <li class="">
                          <a href="models.html">Models</a>
                      </li>
                  
                  </ul>
              </li>
          
        
          
              <li class="">
                  <a href="../timeseries/index.html">Timeseries Data</a>
              </li>
          
        
      
      
      
      
      
      
      
      
    </ul>

</nav>
          </div>
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
              
<div class="tocsection onthispage pt-5 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="nav section-nav flex-column">
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#load-the-demo-data" class="nav-link">Load the demo data</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#the-metadata-class" class="nav-link">The Metadata class</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#add-a-table" class="nav-link">Add a Table</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#add-a-child-table" class="nav-link">Add a Child Table</a><ul class="nav section-nav flex-column">
                
        <li class="nav-item toc-entry toc-h3">
            <a href="#add-a-table-specifying-field-properties" class="nav-link">Add a table specifying field properties</a>
        </li>
    
            </ul>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#metadata-json-format" class="nav-link">Metadata JSON format</a>
        </li>
    
    </ul>
</nav>


              
          </div>
          

          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  <div class="section" id="relational-metadata">
<span id="id1"></span><h1>Relational Metadata<a class="headerlink" href="#relational-metadata" title="Permalink to this headline">¶</a></h1>
<p>In order to work with complex dataset structures you will need to pass
additional information about you data to SDV using <code class="docutils literal notranslate"><span class="pre">Metadata</span></code>.</p>
<p>Let’s go over an example to see how to use it.</p>
<div class="section" id="load-the-demo-data">
<h2>Load the demo data<a class="headerlink" href="#load-the-demo-data" title="Permalink to this headline">¶</a></h2>
<p>In order to follow this tutorial you will need to load one of the demo
datasets included in SDV by calling the <code class="docutils literal notranslate"><span class="pre">sdv.load_demo</span></code> function.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [1]: </span><span class="kn">from</span> <span class="nn">sdv</span> <span class="kn">import</span> <span class="n">load_demo</span>

<span class="gp">In [2]: </span><span class="n">tables</span> <span class="o">=</span> <span class="n">load_demo</span><span class="p">()</span>
</pre></div>
</div>
<p>The output of this function will be a dict that contains several tables
as <code class="docutils literal notranslate"><span class="pre">pandas.DataFarmes</span></code>.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [3]: </span><span class="n">tables</span>
<span class="gh">Out[3]: </span><span class="go"></span>
<span class="go">{&#39;users&#39;:    user_id country gender  age</span>
<span class="go"> 0        0      US      M   34</span>
<span class="go"> 1        1      UK      F   23</span>
<span class="go"> 2        2      ES   None   44</span>
<span class="go"> 3        3      UK      M   22</span>
<span class="go"> 4        4      US      F   54</span>
<span class="go"> 5        5      DE      M   57</span>
<span class="go"> 6        6      BG      F   45</span>
<span class="go"> 7        7      ES   None   41</span>
<span class="go"> 8        8      FR      F   23</span>
<span class="go"> 9        9      UK   None   30,</span>
<span class="go"> &#39;sessions&#39;:    session_id  user_id  device       os</span>
<span class="go"> 0           0        0  mobile  android</span>
<span class="go"> 1           1        1  tablet      ios</span>
<span class="go"> 2           2        1  tablet  android</span>
<span class="go"> 3           3        2  mobile  android</span>
<span class="go"> 4           4        4  mobile      ios</span>
<span class="go"> 5           5        5  mobile  android</span>
<span class="go"> 6           6        6  mobile      ios</span>
<span class="go"> 7           7        6  tablet      ios</span>
<span class="go"> 8           8        6  mobile      ios</span>
<span class="go"> 9           9        8  tablet      ios,</span>
<span class="go"> &#39;transactions&#39;:    transaction_id  session_id           timestamp  amount  approved</span>
<span class="go"> 0               0           0 2019-01-01 12:34:32   100.0      True</span>
<span class="go"> 1               1           0 2019-01-01 12:42:21    55.3      True</span>
<span class="go"> 2               2           1 2019-01-07 17:23:11    79.5      True</span>
<span class="go"> 3               3           3 2019-01-10 11:08:57   112.1     False</span>
<span class="go"> 4               4           5 2019-01-10 21:54:08   110.0     False</span>
<span class="go"> 5               5           5 2019-01-11 11:21:20    76.3      True</span>
<span class="go"> 6               6           7 2019-01-22 14:44:10    89.5      True</span>
<span class="go"> 7               7           8 2019-01-23 10:14:09   132.1     False</span>
<span class="go"> 8               8           9 2019-01-27 16:09:17    68.0      True</span>
<span class="go"> 9               9           9 2019-01-29 12:10:48    99.9      True}</span>
</pre></div>
</div>
<p>You can observe that this dataset has the following structure:</p>
<ul class="simple">
<li><p>A <code class="docutils literal notranslate"><span class="pre">users</span></code> table with:</p>
<ul>
<li><p>A <code class="docutils literal notranslate"><span class="pre">user_id</span></code> field with acts as the table primary key.</p></li>
<li><p>Two categorical fields, <code class="docutils literal notranslate"><span class="pre">country</span></code> and <code class="docutils literal notranslate"><span class="pre">gender</span></code>, and an integer
column <code class="docutils literal notranslate"><span class="pre">age</span></code>.</p></li>
</ul>
</li>
<li><p>A <code class="docutils literal notranslate"><span class="pre">sessions</span></code> table with:</p>
<ul>
<li><p>A <code class="docutils literal notranslate"><span class="pre">session_id</span></code> field with acts as the table primary key.</p></li>
<li><p>A <code class="docutils literal notranslate"><span class="pre">user_id</span></code> field which is a foreign key to the <code class="docutils literal notranslate"><span class="pre">users</span></code> table
and defines a One-to-Many relationship with it (one <code class="docutils literal notranslate"><span class="pre">user</span></code> can
have many <code class="docutils literal notranslate"><span class="pre">sessions</span></code>).</p></li>
<li><p>Two categorical fields <code class="docutils literal notranslate"><span class="pre">device</span></code> and <code class="docutils literal notranslate"><span class="pre">os</span></code>.</p></li>
</ul>
</li>
<li><p>A <code class="docutils literal notranslate"><span class="pre">transactions</span></code> table with:</p>
<ul>
<li><p>A <code class="docutils literal notranslate"><span class="pre">transaction_id</span></code> field with acts as the table primary key.</p></li>
<li><p>A <code class="docutils literal notranslate"><span class="pre">session_id</span></code> field which is a foreign key to the <code class="docutils literal notranslate"><span class="pre">sessions</span></code>
table and defines a One-to-Many relationship with it (one <code class="docutils literal notranslate"><span class="pre">user</span></code>
can make many <code class="docutils literal notranslate"><span class="pre">transactions</span></code> within a single <code class="docutils literal notranslate"><span class="pre">session</span></code>).</p></li>
<li><p>A datetime field, <code class="docutils literal notranslate"><span class="pre">timestamp</span></code>.</p></li>
<li><p>A float field, <code class="docutils literal notranslate"><span class="pre">amount</span></code>.</p></li>
<li><p>A boolean field, <code class="docutils literal notranslate"><span class="pre">approved</span></code>.</p></li>
</ul>
</li>
</ul>
<p>Let us now see how to build a <code class="docutils literal notranslate"><span class="pre">Metadata</span></code> object that represents this
dataset.</p>
</div>
<div class="section" id="the-metadata-class">
<h2>The Metadata class<a class="headerlink" href="#the-metadata-class" title="Permalink to this headline">¶</a></h2>
<p>In SDV, the structure of a dataset is represented using the class
<code class="docutils literal notranslate"><span class="pre">sdv.Metadata</span></code>, which contains all the information that SDV needs in
order to optimally learn the dataset and generate synthetic versions of
it.</p>
<p>In order to create a <code class="docutils literal notranslate"><span class="pre">Metadata</span></code> for our dataset, you will first need
to import the class and create an empty instance:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [4]: </span><span class="kn">from</span> <span class="nn">sdv</span> <span class="kn">import</span> <span class="n">Metadata</span>

<span class="gp">In [5]: </span><span class="n">metadata</span> <span class="o">=</span> <span class="n">Metadata</span><span class="p">()</span>

<span class="gp">In [6]: </span><span class="n">metadata</span>
<span class="gh">Out[6]: </span><span class="go"></span>
<span class="go">Metadata</span>
<span class="go">  root_path: .</span>
<span class="go">  tables: []</span>
<span class="go">  relationships:</span>
</pre></div>
</div>
</div>
<div class="section" id="add-a-table">
<h2>Add a Table<a class="headerlink" href="#add-a-table" title="Permalink to this headline">¶</a></h2>
<p>Once you have your <code class="docutils literal notranslate"><span class="pre">Metadata</span></code> instance ready you can start adding
tables.</p>
<p>In this example, you will add the table <code class="docutils literal notranslate"><span class="pre">users</span></code>, which is the parent
table of your dataset, indicating which is its Primary Key field,
<code class="docutils literal notranslate"><span class="pre">user_id</span></code>.</p>
<p>Note that indicating the Primary Key is optional and can be skipped if
your table has none, but if a table does not have one, you will not be
able to add any child tables to it.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [7]: </span><span class="n">metadata</span><span class="o">.</span><span class="n">add_table</span><span class="p">(</span>
<span class="gp">   ...: </span>    <span class="n">name</span><span class="o">=</span><span class="s1">&#39;users&#39;</span><span class="p">,</span>
<span class="gp">   ...: </span>    <span class="n">data</span><span class="o">=</span><span class="n">tables</span><span class="p">[</span><span class="s1">&#39;users&#39;</span><span class="p">],</span>
<span class="gp">   ...: </span>    <span class="n">primary_key</span><span class="o">=</span><span class="s1">&#39;user_id&#39;</span>
<span class="gp">   ...: </span><span class="p">)</span>
<span class="gp">   ...: </span>
</pre></div>
</div>
<p>At this point, our metadata only contains one table and, of course, no
relationships:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [8]: </span><span class="n">metadata</span>
<span class="gh">Out[8]: </span><span class="go"></span>
<span class="go">Metadata</span>
<span class="go">  root_path: .</span>
<span class="go">  tables: [&#39;users&#39;]</span>
<span class="go">  relationships:</span>
</pre></div>
</div>
<p>However, the <code class="docutils literal notranslate"><span class="pre">Metadata</span></code> instance will have already analyze all the
columns in the passed table and identified the different data types and
subtypes, and will properly indicate that the <code class="docutils literal notranslate"><span class="pre">user_id</span></code> column is the
table primary key.</p>
<p>You can see so by calling the <code class="docutils literal notranslate"><span class="pre">visualize</span></code> method of your <code class="docutils literal notranslate"><span class="pre">metadata</span></code>
instance:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [9]: </span><span class="n">metadata</span><span class="o">.</span><span class="n">visualize</span><span class="p">();</span>
</pre></div>
</div>
<img alt="images/metadata_1.png" src="images/metadata_1.png" />
<p>Or you can obtain this information in a machine-readable format by
calling the <code class="docutils literal notranslate"><span class="pre">get_table_meta</span></code> method:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [10]: </span><span class="n">metadata</span><span class="o">.</span><span class="n">get_table_meta</span><span class="p">(</span><span class="s1">&#39;users&#39;</span><span class="p">)</span>
<span class="gh">Out[10]: </span><span class="go"></span>
<span class="go">{&#39;fields&#39;: {&#39;age&#39;: {&#39;type&#39;: &#39;numerical&#39;, &#39;subtype&#39;: &#39;integer&#39;},</span>
<span class="go">  &#39;gender&#39;: {&#39;type&#39;: &#39;categorical&#39;},</span>
<span class="go">  &#39;user_id&#39;: {&#39;type&#39;: &#39;id&#39;, &#39;subtype&#39;: &#39;integer&#39;},</span>
<span class="go">  &#39;country&#39;: {&#39;type&#39;: &#39;categorical&#39;}},</span>
<span class="go"> &#39;primary_key&#39;: &#39;user_id&#39;}</span>
</pre></div>
</div>
</div>
<div class="section" id="add-a-child-table">
<h2>Add a Child Table<a class="headerlink" href="#add-a-child-table" title="Permalink to this headline">¶</a></h2>
<p>Now that you have one parent table, you will add its child table
<code class="docutils literal notranslate"><span class="pre">sessions</span></code>, which is related to the <code class="docutils literal notranslate"><span class="pre">users</span></code> table in a parent-child
relationship where each <code class="docutils literal notranslate"><span class="pre">user</span></code> can have multiple <code class="docutils literal notranslate"><span class="pre">sessions</span></code>, and
each <code class="docutils literal notranslate"><span class="pre">session</span></code> belongs to one and only one <code class="docutils literal notranslate"><span class="pre">user</span></code>.</p>
<p>In order to specify this, while creating the <code class="docutils literal notranslate"><span class="pre">sessions</span></code> table you have
to indicate the name of the parent table, <code class="docutils literal notranslate"><span class="pre">users</span></code>, and the field from
the <code class="docutils literal notranslate"><span class="pre">sessions</span></code> table that acts as the foreign key, which in this case
is called <code class="docutils literal notranslate"><span class="pre">user_id</span></code>.</p>
<p>With this, apart from analyzing all the columns and indicating the
primary key like in the previous step, the <code class="docutils literal notranslate"><span class="pre">Metadata</span></code> instance will
specify a relationship between the two tables by adding a property to
the <code class="docutils literal notranslate"><span class="pre">user_id</span></code> field that indicates that it is related to the
<code class="docutils literal notranslate"><span class="pre">user_id</span></code> field in the <code class="docutils literal notranslate"><span class="pre">users</span></code> table.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [11]: </span><span class="n">metadata</span><span class="o">.</span><span class="n">add_table</span><span class="p">(</span>
<span class="gp">   ....: </span>    <span class="n">name</span><span class="o">=</span><span class="s1">&#39;sessions&#39;</span><span class="p">,</span>
<span class="gp">   ....: </span>    <span class="n">data</span><span class="o">=</span><span class="n">tables</span><span class="p">[</span><span class="s1">&#39;sessions&#39;</span><span class="p">],</span>
<span class="gp">   ....: </span>    <span class="n">primary_key</span><span class="o">=</span><span class="s1">&#39;session_id&#39;</span><span class="p">,</span>
<span class="gp">   ....: </span>    <span class="n">parent</span><span class="o">=</span><span class="s1">&#39;users&#39;</span><span class="p">,</span>
<span class="gp">   ....: </span>    <span class="n">foreign_key</span><span class="o">=</span><span class="s1">&#39;user_id&#39;</span>
<span class="gp">   ....: </span><span class="p">)</span>
<span class="gp">   ....: </span>
</pre></div>
</div>
<p>Now we can see how the table and the relationship have been registered:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [12]: </span><span class="n">metadata</span>
<span class="gh">Out[12]: </span><span class="go"></span>
<span class="go">Metadata</span>
<span class="go">  root_path: .</span>
<span class="go">  tables: [&#39;users&#39;, &#39;sessions&#39;]</span>
<span class="go">  relationships:</span>
<span class="go">    sessions.user_id -&gt; users.user_id</span>
</pre></div>
</div>
<div class="section" id="add-a-table-specifying-field-properties">
<h3>Add a table specifying field properties<a class="headerlink" href="#add-a-table-specifying-field-properties" title="Permalink to this headline">¶</a></h3>
<p>There are situations where the <code class="docutils literal notranslate"><span class="pre">Metadata</span></code> analysis is not able to
figure out some data types or subtypes, or to deduce some properties of
the field such as the datetime format.</p>
<p>In these situations, you can pass a dictionary with the exact metadata
of those fields, which will overwrite the deductions from the analysis
process.</p>
<p>In this next example, you will be adding a <code class="docutils literal notranslate"><span class="pre">transactions</span></code> table, which
is related to the previous <code class="docutils literal notranslate"><span class="pre">sessions</span></code> table, and contains a
<code class="docutils literal notranslate"><span class="pre">datetime</span></code> field which needs to have the datetime format specified.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [13]: </span><span class="n">transactions_fields</span> <span class="o">=</span> <span class="p">{</span>
<span class="gp">   ....: </span>    <span class="s1">&#39;timestamp&#39;</span><span class="p">:</span> <span class="p">{</span>
<span class="gp">   ....: </span>        <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;datetime&#39;</span><span class="p">,</span>
<span class="gp">   ....: </span>        <span class="s1">&#39;format&#39;</span><span class="p">:</span> <span class="s1">&#39;%Y-%m-</span><span class="si">%d</span><span class="s1">&#39;</span>
<span class="gp">   ....: </span>    <span class="p">}</span>
<span class="gp">   ....: </span><span class="p">}</span>
<span class="gp">   ....: </span>

<span class="gp">In [14]: </span><span class="n">metadata</span><span class="o">.</span><span class="n">add_table</span><span class="p">(</span>
<span class="gp">   ....: </span>    <span class="n">name</span><span class="o">=</span><span class="s1">&#39;transactions&#39;</span><span class="p">,</span>
<span class="gp">   ....: </span>    <span class="n">data</span><span class="o">=</span><span class="n">tables</span><span class="p">[</span><span class="s1">&#39;transactions&#39;</span><span class="p">],</span>
<span class="gp">   ....: </span>    <span class="n">fields_metadata</span><span class="o">=</span><span class="n">transactions_fields</span><span class="p">,</span>
<span class="gp">   ....: </span>    <span class="n">primary_key</span><span class="o">=</span><span class="s1">&#39;transaction_id&#39;</span><span class="p">,</span>
<span class="gp">   ....: </span>    <span class="n">parent</span><span class="o">=</span><span class="s1">&#39;sessions&#39;</span>
<span class="gp">   ....: </span><span class="p">)</span>
<span class="gp">   ....: </span>
</pre></div>
</div>
<p>Let’s see what our Metadata looks like right now:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [15]: </span><span class="n">metadata</span>
<span class="gh">Out[15]: </span><span class="go"></span>
<span class="go">Metadata</span>
<span class="go">  root_path: .</span>
<span class="go">  tables: [&#39;users&#39;, &#39;sessions&#39;, &#39;transactions&#39;]</span>
<span class="go">  relationships:</span>
<span class="go">    sessions.user_id -&gt; users.user_id</span>
<span class="go">    transactions.session_id -&gt; sessions.session_id</span>

<span class="gp">In [16]: </span><span class="n">metadata</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>
<span class="gh">Out[16]: </span><span class="go"></span>
<span class="go">{&#39;tables&#39;: {&#39;users&#39;: {&#39;fields&#39;: {&#39;age&#39;: {&#39;type&#39;: &#39;numerical&#39;,</span>
<span class="go">     &#39;subtype&#39;: &#39;integer&#39;},</span>
<span class="go">    &#39;gender&#39;: {&#39;type&#39;: &#39;categorical&#39;},</span>
<span class="go">    &#39;user_id&#39;: {&#39;type&#39;: &#39;id&#39;, &#39;subtype&#39;: &#39;integer&#39;},</span>
<span class="go">    &#39;country&#39;: {&#39;type&#39;: &#39;categorical&#39;}},</span>
<span class="go">   &#39;primary_key&#39;: &#39;user_id&#39;},</span>
<span class="go">  &#39;sessions&#39;: {&#39;fields&#39;: {&#39;os&#39;: {&#39;type&#39;: &#39;categorical&#39;},</span>
<span class="go">    &#39;session_id&#39;: {&#39;type&#39;: &#39;id&#39;, &#39;subtype&#39;: &#39;integer&#39;},</span>
<span class="go">    &#39;user_id&#39;: {&#39;type&#39;: &#39;id&#39;,</span>
<span class="go">     &#39;subtype&#39;: &#39;integer&#39;,</span>
<span class="go">     &#39;ref&#39;: {&#39;table&#39;: &#39;users&#39;, &#39;field&#39;: &#39;user_id&#39;}},</span>
<span class="go">    &#39;device&#39;: {&#39;type&#39;: &#39;categorical&#39;}},</span>
<span class="go">   &#39;primary_key&#39;: &#39;session_id&#39;},</span>
<span class="go">  &#39;transactions&#39;: {&#39;fields&#39;: {&#39;timestamp&#39;: {&#39;type&#39;: &#39;datetime&#39;,</span>
<span class="go">     &#39;format&#39;: &#39;%Y-%m-%d&#39;},</span>
<span class="go">    &#39;approved&#39;: {&#39;type&#39;: &#39;boolean&#39;},</span>
<span class="go">    &#39;session_id&#39;: {&#39;type&#39;: &#39;id&#39;,</span>
<span class="go">     &#39;subtype&#39;: &#39;integer&#39;,</span>
<span class="go">     &#39;ref&#39;: {&#39;table&#39;: &#39;sessions&#39;, &#39;field&#39;: &#39;session_id&#39;}},</span>
<span class="go">    &#39;transaction_id&#39;: {&#39;type&#39;: &#39;id&#39;, &#39;subtype&#39;: &#39;integer&#39;},</span>
<span class="go">    &#39;amount&#39;: {&#39;type&#39;: &#39;numerical&#39;, &#39;subtype&#39;: &#39;float&#39;}},</span>
<span class="go">   &#39;primary_key&#39;: &#39;transaction_id&#39;}}}</span>


<span class="gp">In [17]: </span><span class="n">metadata</span><span class="o">.</span><span class="n">visualize</span><span class="p">();</span>
</pre></div>
</div>
<img alt="images/metadata_2.png" src="images/metadata_2.png" />
</div>
</div>
<div class="section" id="metadata-json-format">
<h2>Metadata JSON format<a class="headerlink" href="#metadata-json-format" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">Metadata</span></code> objects can also be saved as a JSON file and later on
loaded from them.</p>
<p>In order to save the current <code class="docutils literal notranslate"><span class="pre">metadata</span></code> as a JSON file, all you need
to do is call the <code class="docutils literal notranslate"><span class="pre">to_json</span></code> method passing the path to the JSON file
that you want to create.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [18]: </span><span class="n">metadata</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span><span class="s1">&#39;demo_metadata.json&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>You can see that the contents of the created file are very similar to
the <code class="docutils literal notranslate"><span class="pre">dict</span></code> representation of the metadata:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [19]: </span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;demo_metadata.json&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">meta_file</span><span class="p">:</span>
<span class="gp">   ....: </span>    <span class="nb">print</span><span class="p">(</span><span class="n">meta_file</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
<span class="gp">   ....: </span>
<span class="go">{</span>
<span class="go">    &quot;tables&quot;: {</span>
<span class="go">        &quot;users&quot;: {</span>
<span class="go">            &quot;fields&quot;: {</span>
<span class="go">                &quot;age&quot;: {</span>
<span class="go">                    &quot;type&quot;: &quot;numerical&quot;,</span>
<span class="go">                    &quot;subtype&quot;: &quot;integer&quot;</span>
<span class="go">                },</span>
<span class="go">                &quot;gender&quot;: {</span>
<span class="go">                    &quot;type&quot;: &quot;categorical&quot;</span>
<span class="go">                },</span>
<span class="go">                &quot;user_id&quot;: {</span>
<span class="go">                    &quot;type&quot;: &quot;id&quot;,</span>
<span class="go">                    &quot;subtype&quot;: &quot;integer&quot;</span>
<span class="go">                },</span>
<span class="go">                &quot;country&quot;: {</span>
<span class="go">                    &quot;type&quot;: &quot;categorical&quot;</span>
<span class="go">                }</span>
<span class="go">            },</span>
<span class="go">            &quot;primary_key&quot;: &quot;user_id&quot;</span>
<span class="go">        },</span>
<span class="go">        &quot;sessions&quot;: {</span>
<span class="go">            &quot;fields&quot;: {</span>
<span class="go">                &quot;os&quot;: {</span>
<span class="go">                    &quot;type&quot;: &quot;categorical&quot;</span>
<span class="go">                },</span>
<span class="go">                &quot;session_id&quot;: {</span>
<span class="go">                    &quot;type&quot;: &quot;id&quot;,</span>
<span class="go">                    &quot;subtype&quot;: &quot;integer&quot;</span>
<span class="go">                },</span>
<span class="go">                &quot;user_id&quot;: {</span>
<span class="go">                    &quot;type&quot;: &quot;id&quot;,</span>
<span class="go">                    &quot;subtype&quot;: &quot;integer&quot;,</span>
<span class="go">                    &quot;ref&quot;: {</span>
<span class="go">                        &quot;table&quot;: &quot;users&quot;,</span>
<span class="go">                        &quot;field&quot;: &quot;user_id&quot;</span>
<span class="go">                    }</span>
<span class="go">                },</span>
<span class="go">                &quot;device&quot;: {</span>
<span class="go">                    &quot;type&quot;: &quot;categorical&quot;</span>
<span class="go">                }</span>
<span class="go">            },</span>
<span class="go">            &quot;primary_key&quot;: &quot;session_id&quot;</span>
<span class="go">        },</span>
<span class="go">        &quot;transactions&quot;: {</span>
<span class="go">            &quot;fields&quot;: {</span>
<span class="go">                &quot;timestamp&quot;: {</span>
<span class="go">                    &quot;type&quot;: &quot;datetime&quot;,</span>
<span class="go">                    &quot;format&quot;: &quot;%Y-%m-%d&quot;</span>
<span class="go">                },</span>
<span class="go">                &quot;approved&quot;: {</span>
<span class="go">                    &quot;type&quot;: &quot;boolean&quot;</span>
<span class="go">                },</span>
<span class="go">                &quot;session_id&quot;: {</span>
<span class="go">                    &quot;type&quot;: &quot;id&quot;,</span>
<span class="go">                    &quot;subtype&quot;: &quot;integer&quot;,</span>
<span class="go">                    &quot;ref&quot;: {</span>
<span class="go">                        &quot;table&quot;: &quot;sessions&quot;,</span>
<span class="go">                        &quot;field&quot;: &quot;session_id&quot;</span>
<span class="go">                    }</span>
<span class="go">                },</span>
<span class="go">                &quot;transaction_id&quot;: {</span>
<span class="go">                    &quot;type&quot;: &quot;id&quot;,</span>
<span class="go">                    &quot;subtype&quot;: &quot;integer&quot;</span>
<span class="go">                },</span>
<span class="go">                &quot;amount&quot;: {</span>
<span class="go">                    &quot;type&quot;: &quot;numerical&quot;,</span>
<span class="go">                    &quot;subtype&quot;: &quot;float&quot;</span>
<span class="go">                }</span>
<span class="go">            },</span>
<span class="go">            &quot;primary_key&quot;: &quot;transaction_id&quot;</span>
<span class="go">        }</span>
<span class="go">    }</span>
<span class="go">}</span>
</pre></div>
</div>
<p>After creating the JSON file, loading it back as a <code class="docutils literal notranslate"><span class="pre">metadata</span></code> object
is as simple as passing it to the <code class="docutils literal notranslate"><span class="pre">Metadata</span></code> constructor:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [20]: </span><span class="n">loaded</span> <span class="o">=</span> <span class="n">Metadata</span><span class="p">(</span><span class="s1">&#39;demo_metadata.json&#39;</span><span class="p">)</span>

<span class="gp">In [21]: </span><span class="n">loaded</span>
<span class="gh">Out[21]: </span><span class="go"></span>
<span class="go">Metadata</span>
<span class="go">  root_path: </span>
<span class="go">  tables: [&#39;users&#39;, &#39;sessions&#39;, &#39;transactions&#39;]</span>
<span class="go">  relationships:</span>
<span class="go">    sessions.user_id -&gt; users.user_id</span>
<span class="go">    transactions.session_id -&gt; sessions.session_id</span>
</pre></div>
</div>
</div>
</div>


              </div>
              
              
              <div class='prev-next-bottom'>
                
    <a class='left-prev' id="prev-link" href="data_description.html" title="previous page">Data Description</a>
    <a class='right-next' id="next-link" href="models.html" title="next page">Models</a>

              </div>
              
          </main>
          

      </div>
    </div>

    
  <script src="../../_static/js/index.30270b6e4c972e43c488.js"></script>


    <footer class="footer mt-5 mt-md-0">
  <div class="container">
    <p>
          &copy; Copyright 2018, MIT Data To AI Lab.<br/>
        Created using <a href="http://sphinx-doc.org/">Sphinx</a> 3.2.1.<br/>
    </p>
  </div>
</footer>
  </body>
</html>